name: Create Clean Branch

on:
  push:
    branches:
      - main  # যখনই মেইন ব্রাঞ্চে পুশ করবেন এটি কাজ শুরু করবে

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Setup Git Configuration
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"

      - name: Create Clean Orphan Branch
        run: |
          # tnx_bd নামে নতুন অনাথ (orphan) ব্রাঞ্চ তৈরি
          git checkout --orphan tnx_bd
          
          # সব ফাইল ডিলিট করা
          git rm -rf .
          
          # একটি নতুন ব্ল্যাঙ্ক ফাইল তৈরি (ব্রাঞ্চ সেভ রাখার জন্য জরুরি)
          echo "# Clean Branch: tnx_bd" > README.md
          
          # ফাইল অ্যাড এবং পুশ করা
          git add README.md
          git commit -m "Created a clean empty branch named tnx_bd"
          git push origin tnx_bd --force
